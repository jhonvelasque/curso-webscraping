# Curso de Web Scraping: Extracci√≥n de Datos en la Web

# **Modulo IV - APIS**
- [Clase 20 Introducci√≥n a APIs](#20-introducci√≥n-a-apis)



# 20. **Introducci√≥n a APIs** 

<img src="./img/m4c0-1.png"/>

En este m√≥dulo utilizaremos APIs para obtener informaci√≥n sobre artistas, discos y tracks disponibles en Spotify.

¬øQu√© es una **API**?

Por sus siglas en ingl√©s, una API es una interfaz para programar aplicaciones (*Application Programming Interface*).
Es decir que es un conjunto de funciones, m√©todos, reglas y definiciones que nos permitir√°n desarrollar aplicaciones (en este caso un scraper) que se comuniquen con los servidores de Spotify. Las APIs son dise√±adas y desarrolladas por las empresas que tienen inter√©s en que se desarrollen aplicaciones (p√∫blicas o privadas) que utilicen sus servicios. Spotify tiene APIs p√∫blicas y bien documentadas que estaremos usando en el desarrollo de este proyecto.

### REST
Un t√©rmino que seguramente te vas a encontrar cuando est√©s buscando informaci√≥n en internet es **REST** o *RESTful*. Significa *representational state transfer* y si una API es REST o RESTful, implica que respeta unos determinados principios de arquitectura, como por ejemplo un protocolo de comunicaci√≥n cliente/servidor (que ser√° HTTP) y (entre otras cosas) un conjunto de operaciones definidas que conocemos como **m√©todos**. Ya ven√≠amos usando el m√©todo GET para hacer solicitudes a servidores web.

### Documentaci√≥n
Como mencion√© antes, las APIs son dise√±adas por las mismas empresas que tienen inter√©s en que se desarrollen aplicaciones (p√∫blicas o privadas) que consuman sus servicios o informaci√≥n. Es por eso que la forma de utilizar las APIs variar√° dependiendo del servicio que queramos consumir. No es lo mismo utilizar las APIs de Spotify que las APIs de Twitter. Por esta raz√≥n es de suma importancia leer la documentaci√≥n disponible, generalmente en la secci√≥n de desarrolladores de cada sitio. Te dejo el [link a la de Spotify](https://developer.spotify.com/documentation/)

### JSON
Json significa *JavaScript Object Notation* y es un formato para describir objetos que gan√≥ tanta popularidad en su uso que ahora se lo considera independiente del lenguaje. De hecho, lo utilizaremos en este proyecto por m√°s que estemos trabajando en Python, porque es la forma en la que obtendremos las respuestas a las solicitudes que realicemos utilizando las APIs. Para nosotros, no ser√° ni m√°s ni menos que un diccionario con algunas particularidades que iremos viendo a lo 
largo del curso.

Hay muy buenas APIs gratuitas en la web para practicar Machine Learning, aqu√≠ hay una lista: [https://todobi.com/las-mejores-apis-para-machine-learning/](https://todobi.com/las-mejores-apis-para-machine-learning/)

# 21. **Utilizando APIs: Construir una URL** 

> #### [M4C1 Construir una URL](M4C1-construir-url.ipynb) puedes mirar este archivo como gu√≠a de esta secci√≥n.

Links √∫tiles para la clase:
- Documentaci√≥n de Spotify - Web API Reference - Artistas

[Web API Reference | Spotify for Developers](https://developer.spotify.com/documentation/web-api/reference/#/operations/get-an-artist)

- Coldplay en Spotify, aqui podemos ver el id del artista.

[Coldplay](https://open.spotify.com/artist/4gzpq5DPGxSnKTe4SA8HAU)

## Empecemos!

```python
#Importamos la libreria que utilizaremos para consumir y hacer peticiones
import requests
```

```python
#URL base para peticiones GET de la api de SPOTIFY
url_base='https://api.spotify.com/v1'
```

```python
#guardamos el id de la pagina del artista de spotify en este ejemplo el id de coldplay
id_artist='4gzpq5DPGxSnKTe4SA8HAU'
```

```python
#ruta de ENDPOINT para artistas (ver documentacion API)
ep_artist='/artists/{id}'
```

```python
#unificamos nuestra URL final
url_base+ep_artist.format(id=id_artist)
```

```python
#creamos nuestra peticion con la libreria requests
# y pasamos como parametro la URL que construimos de la api de SPOTIFY
r=requests.get(url_base+ep_artist.format(id=id_artist))
```

'https://api.spotify.com/v1/artists/4gzpq5DPGxSnKTe4SA8HAU'

```python
#vemos el estado que nos desvuelve la peticion
r.status_code
```

401

```python
# status code = 401 ; significa que no estamos autorizados a acceder al ENDPOINT
#utilizamos este metodo para visualizar lo que devuelve el JSON de nuestro peticion
r.json()
```

{'error': {'status': 401, 'message': 'No token provided'}}

> üõ† Por el momento es todo, continuaremos en la siguiente secci√≥n.

# 22. **Utilizando APIs: Tokens y B√∫squeda** 

> #### [M4C2 Tokens y B√∫squeda](M4C2-tokens-y-busqueda.ipynb) puedes mirar este archivo como gu√≠a de esta secci√≥n.